<?php
namespace {{namespace}};

use Symfony\Component\Validator\Validation;
use Symfony\Component\HttpFoundation\Request;

{% for assert in imports.asserts %}
use {{assert}};
{% endfor %}

{% for entity in imports.entities %}
use {{entity}};
{% endfor %}

class  {{classname}}
{

    private $data = [];
   
    public function __construct(Request $request) {
    
    }
  
    public function isValid(){
    
        $validator = Validation::createValidator();
{% for entity in entities %}
        $tmpEntity = new {{entity.name}}();
{% if entity.groupe %}
        $violations = $validator->validate($tmpEntity,null,array('{{entity.groupe}}'));
{% else %}
        $violations = $validator->validate($tmpEntity);
{% endif %}{% endfor %}          

        $violations = $validator->validate('Behat', array(new Asserts()));

        if (0 !== count($violations)) {
            foreach ($violations as $violation) {
                echo $violation->getMessage().'<br>';
            }
        }

    }
    
}



